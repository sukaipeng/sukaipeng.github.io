<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="SKP">
  <meta name="keywords" content="JAVA">
  <title>JVM 概述 - SKP 的博客</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>SKP</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-08-02 16:15">
      2020年8月2日 下午
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.1k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      35
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <h2 id="谈谈对-java-的理解"><a href="#谈谈对-java-的理解" class="headerlink" title="谈谈对 java 的理解"></a>谈谈对 java 的理解</h2><ul>
<li>平台无关性</li>
<li>GC</li>
<li>语言特性 反射 lambda</li>
<li>面向对象</li>
<li>类库</li>
<li>异常处理</li>
</ul>
<p>详细可查看极客时间</p>
<h2 id="平台无关性"><a href="#平台无关性" class="headerlink" title="平台无关性"></a>平台无关性</h2><p>javac 编译 .java -&gt; .class -&gt; JVM For Linux / JVM For Windows</p>
<p>javap -c 反汇编 java 虚指令，字节码</p>
<h2 id="JVM-的组成部分"><a href="#JVM-的组成部分" class="headerlink" title="JVM 的组成部分"></a>JVM 的组成部分</h2><ul>
<li>Class Loader - 依据特定的格式，加载 class 文件到内存</li>
<li>Execution Engine - 对 class 文件的命令进行解析</li>
<li>Native Interface - 融合不同开发语言的原生库为 Java 所用</li>
<li>Runtime Data Area - JVM 内存空间结构模型</li>
</ul>
<h2 id="什么是反射"><a href="#什么是反射" class="headerlink" title="什么是反射"></a>什么是反射</h2><p>动态获取任意一个类的所有属性和方法，并进行调用。</p>
<p>类的元素在 java 中被映射成一个个类，如构造方法-Constructor、成员变量-Field、方法-Method。</p>
<pre><code class="hljs java">Class.forName();
clazz.getDeclaredMethod(); <span class="hljs-comment">// Method invoke</span>
clazz.getMethod();
clazz.getDeclaredField(); <span class="hljs-comment">// Field set</span></code></pre>

<h2 id="Class-Loader"><a href="#Class-Loader" class="headerlink" title="Class Loader"></a>Class Loader</h2><p>Java 的核心组件，主要工作在 Class 装载的加载阶段，主要作用是从系统外部获得 Class 二进制数据流。Class Loader 负责将 Class 文件中的二进制数据流装载进系统，然后交给 JVM 进行链接、初始化等操作</p>
<h3 id="Class-Loader-的种类"><a href="#Class-Loader-的种类" class="headerlink" title="Class Loader 的种类"></a>Class Loader 的种类</h3><ol>
<li>BootStrapClassLoader - C++编写，加载核心库 java._ JRE\lib\rt.jar 或者 -Xbootclasspath</li>
<li>ExtClassLoader - Java 编写，加载扩展库 javax._ JRE\lib\ext* 或者 -Djava.ext.dirs</li>
<li>AppClassLoader - Java 编写，加载程序所在目录 classpath 或者 -Djava.class.path</li>
<li>自定义 Class Loader - 关键函数 findClass() defineClass()</li>
</ol>
<h3 id="类从编译到执行的过程"><a href="#类从编译到执行的过程" class="headerlink" title="类从编译到执行的过程"></a>类从编译到执行的过程</h3><ol>
<li>编译器将 Robot.java 编译为 Robot.class 字节码文件</li>
<li>ClassLoader 将字节码转化为 JVM 中的 Class<Robot>对象</li>
<li>JVM 利用 Class<Robot>对象实例化为 Robot 对象</li>
</ol>
<h2 id="Class-Loader-的双亲委派机制"><a href="#Class-Loader-的双亲委派机制" class="headerlink" title="Class Loader 的双亲委派机制"></a>Class Loader 的双亲委派机制</h2><ol>
<li>加载类的时候，会自下向上查找 Class Loader 是否加载过对应的类。</li>
<li>如果某个父 Class Loader 加载过对应的类，则直接返回。</li>
<li>如果一直向上查找直到 BootStrapClassLoader 都没有加载过对应的类，BootStrapClassLoader 就会到指定的路径（JRE\lib\rt.jar 或者-Xbootclasspath）下，查看是否存在对应的类。</li>
<li>如果找到对应的 Class 文件，则由 BootStrapClassLoader 加载对应的类到 JVM 中。</li>
<li>如果 BootStrapClassLoader 找不到对应的 Class 文件，则委托给子 Class Loader（ExtClassLoader）去指定的路径下查找对应的类。</li>
<li>以此类推，最终到最下面的 Class Loader。</li>
</ol>
<p>使用双亲委派机制加载类的原因？避免多份同样字节码的加载</p>
<h2 id="类的加载"><a href="#类的加载" class="headerlink" title="类的加载"></a>类的加载</h2><h3 id="类的加载方式"><a href="#类的加载方式" class="headerlink" title="类的加载方式"></a>类的加载方式</h3><ul>
<li>隐式加载：new</li>
<li>显式加载：loadClass、forName</li>
</ul>
<h3 id="类的装载过程"><a href="#类的装载过程" class="headerlink" title="类的装载过程"></a>类的装载过程</h3><ul>
<li>加载 通过 Class Loader 加载 class 文件字节码，生成 Class 对象</li>
<li>链接<ul>
<li>校验 检查加载的 class 的正确性和安全性</li>
<li>准备 为类变量分配存储空间并设置类变量初始值</li>
<li>解析 JVM 将常量池内的符号引用转换为直接引用</li>
</ul>
</li>
<li>初始化 执行类变量赋值和静态代码块</li>
</ul>
<h3 id="loadClass-和-forName-的区别"><a href="#loadClass-和-forName-的区别" class="headerlink" title="loadClass 和 forName 的区别"></a>loadClass 和 forName 的区别</h3><ul>
<li><p>Class.forName 得到的 class 是已经初始化完成的。</p>
<p>com.mysql.jdbc.Driver 通过 forName 来加载，才会初始化，执行静态代码块中注册 Mysql 驱动的代码。</p>
</li>
<li><p>Classloader.loadClass 得到的 class 是还没有链接的。</p>
<p>Spring 的 IOC 容器的懒加载，就是使用了 loadClass，在 class 实际被使用到的时候，才进行链接和初始化。</p>
</li>
</ul>
<h2 id="Java-内存模型"><a href="#Java-内存模型" class="headerlink" title="Java 内存模型"></a>Java 内存模型</h2><h3 id="运行时数据区"><a href="#运行时数据区" class="headerlink" title="运行时数据区"></a>运行时数据区</h3><ul>
<li><p>线程私有</p>
<ul>
<li>程序计数器<ul>
<li>当前线程所执行的字节码行号指示器（逻辑）</li>
<li>改变计数器的值来选取下一条需要执行的字节码指令</li>
<li>和线程是一对一的关系，即线程私有</li>
<li>对 Java 方法计数，如果是 Native 方法则计数器值为 Undefined</li>
<li>不会发生内存泄漏</li>
</ul>
</li>
<li>虚拟机栈<ul>
<li>Java 方法执行的内存模型</li>
<li>包含多个栈帧</li>
<li>栈帧包含局部变量表、操作数栈、动态链接、返回地址<ul>
<li>局部变量表和操作数栈的区别<ul>
<li>局部变量表：包含方法执行过程中的所有变量</li>
<li>操作数栈：入栈、出栈、复制、交换、产生消费变量</li>
<li>局部变量表主要是为操作数栈提供必要的数据支撑</li>
<li>代码示例</li>
</ul>
</li>
</ul>
</li>
<li>jstack 列出虚拟机栈</li>
</ul>
</li>
<li>本地方法栈<ul>
<li>与虚拟机栈相似，主要作用于标注了 native 的本地方法</li>
</ul>
</li>
</ul>
</li>
<li><p>线程共享</p>
<ul>
<li><p>MetaSpace</p>
<ul>
<li>类加载信息</li>
<li>JDK8 新增了 MetaSpace，并去除了永久代</li>
<li>元空间（MetaSpace）与永久代（PermGen）的区别<ul>
<li>元空间和永久代都是方法区的实现</li>
<li>元空间使用本地内存，而永久代使用的是 jvm 的内存<br>java.lang.OutOfMemoryError: PermGen space 不复存在</li>
</ul>
</li>
<li>MetaSpace 相比 PermGen 的优势<ul>
<li>字符串常量存在永久代中，容易出现性能问题和内存溢出。JDK1.7 时，MetaSpace 的字符串常量池被移动到堆中。</li>
<li>类和方法的信息大小难以确定，给永久代的大小指定带来困难</li>
<li>永久代会为 GC 带来不必要的复杂性，降低 GC 的效率</li>
<li>方便 HotSpot 与其他 jvm 如 Jrockit 的集成，PermGen 是 HotSpot 的特殊实现</li>
</ul>
</li>
</ul>
</li>
<li><p>堆</p>
<ul>
<li>对象实例的分配区域</li>
<li>GC 管理的主要区域</li>
<li>常量池<ul>
<li>字面量和符号引用</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>局部变量表和操作数栈的区别</p>
<pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company;

<span class="hljs-comment">/**</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@author</span> skp</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2020/8/1</span>
<span class="hljs-comment"> **/</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Javap</span> </span>&#123;

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;
    <span class="hljs-keyword">int</span> c = <span class="hljs-number">0</span>;
    c = a + b;
    <span class="hljs-keyword">return</span> c;
  &#125;

&#125;</code></pre>

<pre><code class="hljs java"><span class="hljs-comment">// 反编译指令 javap -verbose com/company/Javap.class</span>

Classfile /D:/dev/project/demo/src/com/company/Javap<span class="hljs-class">.<span class="hljs-keyword">class</span></span>
<span class="hljs-class">  ...</span>
<span class="hljs-class"></span>&#123;
  ...

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>)</span></span>;
    descriptor: (II)I                <span class="hljs-comment">// 描述符，传入两个int，返回一个int</span>
    flags: ACC_PUBLIC, ACC_STATIC    <span class="hljs-comment">// 方法修饰符 public static</span>
    Code:
      stack=<span class="hljs-number">2</span>, locals=<span class="hljs-number">3</span>, args_size=<span class="hljs-number">2</span> <span class="hljs-comment">// 操作数栈深度是2，本地变量表大小是3个，入参大小是2个</span>
         <span class="hljs-number">0</span>: iconst_0
         <span class="hljs-number">1</span>: istore_2
         <span class="hljs-number">2</span>: iload_0
         <span class="hljs-number">3</span>: iload_1
         <span class="hljs-number">4</span>: iadd
         <span class="hljs-number">5</span>: istore_2
         <span class="hljs-number">6</span>: iload_2
         <span class="hljs-number">7</span>: ireturn
      LineNumberTable:               <span class="hljs-comment">// 代码行数对应的字节码行数</span>
        line <span class="hljs-number">10</span>: <span class="hljs-number">0</span>                   <span class="hljs-comment">// 第10行代码（int c = 0;）对应第0行字节码（iconst_0）</span>
        line <span class="hljs-number">11</span>: <span class="hljs-number">2</span>
        line <span class="hljs-number">12</span>: <span class="hljs-number">6</span>
&#125;</code></pre>

<h3 id="JVM-的可寻址空间"><a href="#JVM-的可寻址空间" class="headerlink" title="JVM 的可寻址空间"></a>JVM 的可寻址空间</h3><p>OS and C-runtime、JVM、Native heap、Java heap</p>
<h3 id="三大性能调优参数"><a href="#三大性能调优参数" class="headerlink" title="三大性能调优参数"></a>三大性能调优参数</h3><ul>
<li>-Xss：规定了每个线程虚拟机栈（堆栈）的大小，影响线程并发数的大小</li>
<li>-Xms：堆的初始值</li>
<li>-Xmx：堆能达到的最大值<blockquote>
<p>一般将-Xms 和-Xmx 设置成一样。虚拟机因内存不足而发生扩容时，会导致内存抖动，影响程序运行的稳定性</p>
</blockquote>
</li>
</ul>
<h3 id="堆和栈的区别"><a href="#堆和栈的区别" class="headerlink" title="堆和栈的区别"></a>堆和栈的区别</h3><ul>
<li>内存分配策略<ul>
<li>静态存储：编译时确定每个数据目标在运行时的存储空间需求</li>
<li>栈式存储：数据区需求在编译时未知，运行时模块入口前确定</li>
<li>堆式存储：编译时或运行时模块入口都无法确定，动态分配。如对象实例</li>
</ul>
</li>
<li>联系<ul>
<li>引用对象、数组时，栈里定义变量保存堆中目标的首地址</li>
</ul>
</li>
<li>区别<ul>
<li>管理方式：栈自动释放，堆需要 GC</li>
<li>空间大小：栈比堆小</li>
<li>碎片相关：栈产生的碎片远小于堆</li>
<li>分配方法：栈支持静态和动态分配，而堆仅支持动态分配</li>
<li>效率：栈的效率比堆高</li>
</ul>
</li>
</ul>
<h3 id="String-intern-在-JDK6-和-JDK6-的区别"><a href="#String-intern-在-JDK6-和-JDK6-的区别" class="headerlink" title="String.intern 在 JDK6 和 JDK6+的区别"></a>String.intern 在 JDK6 和 JDK6+的区别</h3><p>JDK6 常量池存在永久代中，字符串不会被 GC，所以会导致 PermGen space OOM。JDK6+ 常量池存在堆中，会被 GC</p>
<pre><code class="hljs java"><span class="hljs-comment">// JDK6 和 JDK6+ 一样</span>
<span class="hljs-comment">// "a" 会先在常量池中新增常量，然后 new String 会在堆中新增一个 a Sting 对象。</span>
String s1 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"a"</span>);
<span class="hljs-comment">// 调用 intern 方法，由于常量池中已经存在 "a"，所以没办法将 s1 添加到常量池中。</span>
s1.intern();
<span class="hljs-comment">// 引用的是常量池的 "a"，所以 s1 和 s2 引用不相同。</span>
String s2 = <span class="hljs-string">"a"</span>;

<span class="hljs-comment">// JDK6 和 JDK6+ 不一样</span>
<span class="hljs-comment">// 在堆中新增一个 "aa" 对象。</span>
String s3 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"a"</span>) + <span class="hljs-keyword">new</span> String(<span class="hljs-string">"a"</span>);
<span class="hljs-comment">// 由于常量池中不存在 "aa" 所以会将 "aa" 放到常量池中。</span>
<span class="hljs-comment">// 但是JDK6放的是 "aa" 的副本，引用不同。JDK6+放的是 "aa" 的引用。</span>
s3.intern();
String s4 = <span class="hljs-string">"aa"</span>;
<span class="hljs-comment">// 所以 s3 == s4，JDK6：false；JDK6+：true。</span></code></pre>

<h2 id="垃圾回收机制"><a href="#垃圾回收机制" class="headerlink" title="垃圾回收机制"></a>垃圾回收机制</h2><h3 id="判定为垃圾的标准"><a href="#判定为垃圾的标准" class="headerlink" title="判定为垃圾的标准"></a>判定为垃圾的标准</h3><ul>
<li>引用计数算法</li>
<li>可达性分析算法<ul>
<li>通过判断对象的引用链是否可达来决定对象是否可以被回收</li>
<li>GC Root<ul>
<li>虚拟机栈中引用的对象（栈帧中的本地变量表）</li>
<li>方法区中的常量引用的对象</li>
<li>方法区中的类静态属性引用的对象</li>
<li>本地方法栈中 JNI（Navtive 方法）的引用对象</li>
<li>活跃线程的引用对象</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="垃圾回收算法"><a href="#垃圾回收算法" class="headerlink" title="垃圾回收算法"></a>垃圾回收算法</h3><ul>
<li>标记-清除算法<ul>
<li>碎片化</li>
</ul>
</li>
<li>复制算法<ul>
<li>解决碎片化问题</li>
<li>顺序分配内存，简单高效</li>
<li>适用于对象存活率低的场景</li>
</ul>
</li>
<li>标记-整理算法<ul>
<li>避免内存的不连续性</li>
<li>不用设置两块内存互换</li>
<li>适用于存活率高的场景</li>
</ul>
</li>
<li>分代收集算法<ul>
<li>新生代 Minor GC<ul>
<li>Eden 区，新对象的创建区域。该区域满了以后，会触发 Minor GC。</li>
<li>两个 Survivor 区（from 和 to）</li>
<li>对象如何晋升到老年代<ul>
<li>经历一定 Minor GC 次数依然存活的对象（-XX:MaxTenuringThreshold）</li>
<li>Survivor 区中存放不下的对象（对象分配担保机制）</li>
<li>新生成的大对象（-XX:+PretenuerSizeThreshold）</li>
</ul>
</li>
<li>常用的调优参数<ul>
<li>-XX:SurvivorRatio Eden 和 Survivor 的比值，默认为 8: 1</li>
<li>-XX:NewRatio 老年代和新生代的内存大小比例</li>
<li>-XX:MaxTenuringThreshold 对象从新生代晋升到老年代经过 GC 次数的最大阈值</li>
</ul>
</li>
</ul>
</li>
<li>老年代 Full GC<ul>
<li>存放生命周期较长的对象</li>
<li>标记-清理算法</li>
<li>标记-整理算法</li>
<li>Full GC 执行频率比 Minor GC 低得多</li>
<li>触发 Full GC 的条件<ul>
<li>老年代空间不足</li>
<li>永久代空间不足（JDK7 及以前版本）</li>
<li>CMS GC 时出现 promotion failed，concurrent mode failure</li>
<li>Minor GC 晋升到老年代的平均大小大于老年代的剩余空间</li>
<li>System.gc() 提醒虚拟机继续 GC</li>
<li>使用 RMI 来进行 RPC 或管理的 JDK 应用，每小时执行一次 Full GC</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="垃圾收集器"><a href="#垃圾收集器" class="headerlink" title="垃圾收集器"></a>垃圾收集器</h3><ul>
<li>Stop-the-World<ul>
<li>JVM 由于要执行 GC 而停止了应用程序的执行</li>
<li>任何一种 GC 算法中都会发生</li>
<li>多数 GC 优化通过减少 Stop-the-World 发生的时间来提高程序性能</li>
</ul>
</li>
<li>Safepoint<ul>
<li>分析过程中对象引用关系不会发生变化的点</li>
<li>产生 Safepoint 的地方：方法调用；循环跳转；异常跳转等</li>
<li>安全点数量需要适中</li>
</ul>
</li>
<li>新生代收集器<ul>
<li>Serial 收集器（-XX:+UseSerialGC，复制算法）<ul>
<li>单线程收集，进行垃圾收集时，必须暂停所有工作线程</li>
<li>简单高效，Client 模式下默认的新生代收集器</li>
</ul>
</li>
<li>ParNew 收集器（-XX:+UseParNewGC，复制算法）<ul>
<li>多线程收集，其余的行为、特点和 Serial 收集器一样</li>
<li>单核执行效率不如 Serial，在多核下执行才有优势</li>
</ul>
</li>
<li>Parallel Sacvenge 收集器（-XX:+UseParallelGC，复制算法）<ul>
<li>吞吐量 = 运行用户代码时间 / (运行用户代码时间 + 垃圾收集时间)</li>
<li>比起关注用户线程停顿时间，更关注系统的吞吐量</li>
<li>在多核下执行才有优势，Server 模式下默认的新生代收集器</li>
<li>-XX:+UseAdaptiveSizePolicy 自适应调优</li>
</ul>
</li>
</ul>
</li>
<li>老年代收集器<ul>
<li>Serial Old 收集器（-XX:+UseSerialOldGC，标记-整理算法）<ul>
<li>单线程收集，进行垃圾收集时，必须暂停所有工作线程</li>
<li>简单高效，Client 模式下默认的老年代收集器</li>
</ul>
</li>
<li>Parallel Old 收集器（-XX:+UseParallelOldGC，标记-整理算法）<ul>
<li>多线程，吞吐量优先</li>
<li>适用于关注吞吐量和 CPU 计算密集型应用</li>
</ul>
</li>
<li>CMS 收集器（-XX:+UseConcMarkSweepGC，标记-清除算法）<ul>
<li>适用于对停顿比较敏感、存活对象较多</li>
</ul>
</li>
<li>G1 收集器（-XX:+UseG1GC，复制+标记-整理算法）<ul>
<li>特点<ul>
<li>并行和并发（使用多个 CPU 来缩短 Stop-the-World 的时间，和用户线程并发执行）</li>
<li>分代收集</li>
<li>空间整合</li>
<li>可预测的停顿</li>
</ul>
</li>
<li>收集方式<ul>
<li>将整个 Java 堆内存划分成多个大小相等的 Region</li>
<li>新生代和老年代不再物理隔离</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Object-的-finalize-方法的作用是否和-C-的析构函数作用相同"><a href="#Object-的-finalize-方法的作用是否和-C-的析构函数作用相同" class="headerlink" title="Object 的 finalize() 方法的作用是否和 C++ 的析构函数作用相同"></a>Object 的 finalize() 方法的作用是否和 C++ 的析构函数作用相同</h3><ul>
<li>与 C++ 的析构函数不同，析构函数调用确定，而他的是不确定的</li>
<li>将未被引用的对象放置在 F-Queue 队列</li>
<li>方法执行随时可能会被终止</li>
<li>给予对象最后一次重生的机会</li>
</ul>
<h3 id="强引用，软引用，弱引用，虚引用"><a href="#强引用，软引用，弱引用，虚引用" class="headerlink" title="强引用，软引用，弱引用，虚引用"></a>强引用，软引用，弱引用，虚引用</h3><hr>
<p>参考：</p>
<ol>
<li><a href="https://coding.imooc.com/class/303.html#Anchor" target="_blank" rel="noopener">剑指 Java 面试-Offer 直通车</a></li>
</ol>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/JVM/">JVM</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/JVM/">JVM</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/07/26/Redis-%E6%A6%82%E8%BF%B0/">
                        <span class="hidden-mobile">Redis 概述</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "JVM 概述&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>




















</body>
</html>
